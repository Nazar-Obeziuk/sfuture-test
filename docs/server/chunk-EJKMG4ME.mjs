import './polyfills.server.mjs';
import{a as G}from"./chunk-BDDAGRNC.mjs";import{a as J,b as P,c as L,d as $,g as q,h as R,l as W,m as H}from"./chunk-KFBBNZ6Q.mjs";import{R as Y}from"./chunk-5IG6QJXX.mjs";import{$ as O,T as h,Ta as B,U as b,Z as N,ba as A,ca as U,da as E,ea as F,fa as T,ga as n,ha as a,ia as D,la as C,o as f,oa as p,pa as M,qa as V,ra as l,s as j,sa as g,t as v,ta as S,va as z,vb as I,x as y,y as x}from"./chunk-KQAQM22D.mjs";import"./chunk-MZKWKPOA.mjs";function Z(r,o){if(r&1){let _=C();n(0,"div",39),p("click",function(){let i=y(_).$implicit,d=M();return x(d.addListener(i))}),l(1),a()}if(r&2){let _=o.$implicit;O("calendar__prev_day",_.name==="prev")("calendar__next_day",_.name==="next")("calendar__today",_.name==="today"),h(),S(" ",_.day," ")}}function ee(r,o){if(r&1){let _=C();n(0,"div",40),p("click",function(){let i=y(_).$implicit,d=M(2);return x(d.deleteEvent(i))}),n(1,"div",41),D(2,"div",42),n(3,"h3",43),l(4),a()(),n(5,"div",44)(6,"p",45),l(7),a()()()}if(r&2){let _=o.$implicit;h(4),g(_.eventName),h(3),S(" ",_.eventTimeFrom+" - "+_.eventTimeTo," ")}}function te(r,o){if(r&1&&F(0,ee,8,2,"div",46,E),r&2){let _=M();T(_.eventsArray)}}function ne(r,o){r&1&&(n(0,"div",47)(1,"h2",48),l(2,"No Events"),a()())}var k=(()=>{let o=class o{constructor(t,e,i){this.fb=t,this.planService=e,this.toastr=i,this.today=new Date,this.month=this.today.getMonth(),this.year=this.today.getFullYear(),this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.days=[],this.isEventModalOpen=!1,this.isEventsOnClickedDate=!1,this.eventsArray=[],this.dayOfEvent=[]}ngOnInit(){this.initCalendar(),this.initEventForm()}getPersonalData(){let t=localStorage.getItem("currentUser");this.currentUserId=t?JSON.parse(t):void 0}initEventForm(){this.eventForm=this.fb.group({eventName:[null,P.required],eventTimeFrom:[null,P.required],eventTimeTo:[null,P.required],day:[null],month:[null],year:[null]})}initCalendar(){let t=new Date(this.year,this.month,1),e=new Date(this.year,this.month+1,0),d=new Date(this.year,this.month,0).getDate(),s=e.getDate(),m=t.getDay(),u=7-e.getDay()-1;for(let c=m;c>0;c--)this.days.push({day:d-c+1,name:"prev"});for(let c=1;c<=s;c++){let w=!1;c===new Date().getDate()&&this.year===new Date().getFullYear()&&this.month===new Date().getMonth()?(this.activeDay=c,this.getActiveDay(c),this.getUserEvents(c),this.days.push({day:c,name:"today"})):this.days.push({day:c,name:"day"})}for(let c=1;c<=u;c++)this.days.push({day:c,name:"next"})}prevMonth(){this.month--,this.month<0&&(this.month=11,this.year--),this.days=[],this.initCalendar()}nextMonth(){this.month++,this.month>11&&(this.month=0,this.year++),this.days=[],this.initCalendar()}goToTodaysDate(){this.today=new Date,this.month=this.today.getMonth(),this.year=this.today.getFullYear(),this.days=[],this.initCalendar()}getDateInput(t){let e=t.target.value;e=e.replace(/[^0-9/]/g,""),e.length===2&&(e+="/"),e.length>7&&(e=e.slice(0,7)),t.inputType==="deleteContentBackward"&&e.length===3&&(e=e.slice(0,2)),t.target.value=e}goToInputDate(t){let e=t.split("/");if(e.length===2&&e[0]>0&&e[0]<13&&e[1].length===4){this.month=e[0]-1,this.year=e[1],this.days=[],this.initCalendar();return}alert("Invalid date")}toggleAddEventModal(){this.isEventModalOpen=!this.isEventModalOpen}setDateFromAndTo(t){let e=t.target.value;e=e.replace(/[^0-9:]/g,""),e.length===2&&(e+=":"),e.length>5&&(e=e.slice(0,5)),t.inputType==="deleteContentBackward"&&e.length===3&&(e=e.slice(0,2)),t.target.value=e}getDateFrom(t){this.setDateFromAndTo(t)}getDateTo(t){this.setDateFromAndTo(t)}addListener(t){this.getActiveDay(t.day),this.getUserEvents(t.day),t.name==="prev"?this.prevMonth():t.name==="next"&&this.nextMonth()}getActiveDay(t){let e=new Date(this.year,this.month,t);this.dayName=e.toString().split(" ")[0],this.eventDateName=t+" "+this.months[this.month]+" "+this.year}getUserEvents(t){localStorage.getItem("currentUser")&&(this.getPersonalData(),this.planService.getUser(this.currentUserId?.uid).subscribe(e=>{this.eventsArray=[],this.dayOfEvent=[],e.planEvents.forEach(d=>{t===d.day&&this.month+1===d.month&&this.year===d.year&&this.eventsArray.push(d)}),this.dayOfEvent.push(t)}))}createEvent(){if(localStorage.getItem("currentUser")){this.eventForm.value.day=this.dayOfEvent[0],this.eventForm.value.month=this.month+1,this.eventForm.value.year=this.year;let t=this.eventForm.value.eventName,e=this.eventForm.value.eventTimeFrom,i=this.eventForm.value.eventTimeTo;if(e==null||i==null){alert("Please fill all the fields");return}let d=e.split(":"),s=i.split(":");if(d.length!==2||s.length!==2){alert("Invalid Time Format");return}let[m,u]=d,[c,w]=s;if(m<0||m>23||u<0||u>59||c<0||c>23||w<0||w>59){alert("Invalid Time Format");return}t.split("").length<=15?(this.getPersonalData(),this.planService.createUserEvent(this.currentUserId?.uid,this.eventForm.value).then(()=>{this.eventForm.reset(),this.isEventModalOpen=!1,this.toastr.success("The event was successfully added")}).catch(X=>{this.toastr.error("Somethin went wrong"),console.log(X)})):this.toastr.error("Event name is too long")}else alert("Create an account to add events"),this.eventForm.reset()}deleteEvent(t){confirm("Are you sure you want to delete this event?")&&(this.getPersonalData(),this.planService.deleteUserEvent(this.currentUserId?.uid,t).then(()=>{this.toastr.success("Event was successfully completed")}).catch(e=>{this.toastr.error("Something went wrong"),console.log(e)}))}};o.\u0275fac=function(e){return new(e||o)(b(W),b(G),b(Y))},o.\u0275cmp=j({type:o,selectors:[["app-plan"]],standalone:!0,features:[z],decls:66,vars:7,consts:[[1,"container"],[1,"plan__wrapper"],[1,"plan__calendar_block"],[1,"calendar__main_block"],[1,"calendar__inner"],[1,"calendar__inner_header"],[1,"calendar__header_nav"],["src","assets/images/previous-icon.svg","alt","",1,"calendar__nav_previous",3,"click"],[1,"calendar__nav_title"],["src","assets/images/next-icon.svg","alt","",1,"calendar__nav_next",3,"click"],[1,"calendar__inner_main"],[1,"calendar__header_weekdays"],[1,"calendar__weekdays_item"],[1,"calendar__inner_days"],[1,"calendar__inner_footer"],[1,"calendar__footer_input"],["type","text","placeholder","mm/yyyy",1,"calendar__input_item",3,"input"],["inputElement",""],[1,"calendar__input_button",3,"click"],[1,"calendar__footer_button",3,"click"],[1,"events__main_block"],[1,"event__header_block"],[1,"event__header_weekname"],[1,"event__header_date"],[1,"event__main_block"],[1,"event__footer_block"],[1,"event__add_wrapper"],[1,"event__add_header"],[1,"add__header_title"],["src","assets/images/close-icon.svg","alt","",1,"add__header_close",3,"click"],[1,"event__add_main",3,"formGroup"],[1,"event__add_block"],["formControlName","eventName","type","text","placeholder","Event Name",1,"add__block_input"],["formControlName","eventTimeFrom","type","text","placeholder","Event Time From",1,"add__block_input",3,"input"],["formControlName","eventTimeTo","type","text","placeholder","Event Time To",1,"add__block_input",3,"input"],[1,"event__add_footer"],["type","button",1,"add__footer_button",3,"click"],[1,"event__add_circle"],["type","button",1,"add__circle_button",3,"click"],[1,"calendar__main_day",3,"calendar__event_day","click"],[1,"event__block_item",3,"click"],[1,"event__item_title"],[1,"item__title_circle"],[1,"item__title_name"],[1,"event__item_time"],[1,"item__time_text"],["class","event__block_item"],[1,"event__block_empty"],[1,"event__empty_text"],["class","calendar__main_day",3,"calendar__prev_day","calendar__next_day","calendar__today","calendar__event_day"]],template:function(e,i){if(e&1){let d=C();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"img",7),p("click",function(){return i.prevMonth()}),a(),n(8,"p",8),l(9),a(),n(10,"img",9),p("click",function(){return i.nextMonth()}),a()()(),n(11,"div",10)(12,"div",11)(13,"p",12),l(14,"Sun"),a(),n(15,"p",12),l(16,"Mon"),a(),n(17,"p",12),l(18,"Tue"),a(),n(19,"p",12),l(20,"Wed"),a(),n(21,"p",12),l(22,"Thu"),a(),n(23,"p",12),l(24,"Fri"),a(),n(25,"p",12),l(26,"Sat"),a()(),n(27,"div",13),F(28,Z,2,7,"div",49,E),a()(),n(30,"div",14)(31,"div",15)(32,"input",16,17),p("input",function(m){return i.getDateInput(m)}),a(),n(34,"button",18),p("click",function(){y(d);let m=V(33);return x(i.goToInputDate(m.value))}),l(35,"Go"),a()(),n(36,"button",19),p("click",function(){return i.goToTodaysDate()}),l(37,"Today"),a()()()(),n(38,"div",20)(39,"div",21)(40,"p",22),l(41),a(),n(42,"p",23),l(43),a()(),n(44,"div",24),A(45,te,2,0)(46,ne,3,0),a(),n(47,"div",25)(48,"div",26)(49,"div",27)(50,"p",28),l(51,"Add Event"),a(),n(52,"img",29),p("click",function(){return i.toggleAddEventModal()}),a()(),n(53,"div",30)(54,"div",31),D(55,"input",32),a(),n(56,"div",31)(57,"input",33),p("input",function(m){return i.getDateFrom(m)}),a()(),n(58,"div",31)(59,"input",34),p("input",function(m){return i.getDateTo(m)}),a()()(),n(60,"div",35)(61,"button",36),p("click",function(){return i.createEvent()}),l(62,"Add Event"),a()()(),n(63,"div",37)(64,"button",38),p("click",function(){return i.toggleAddEventModal()}),l(65,"+"),a()()()()()()()}e&2&&(h(9),g(i.months[i.month]+" "+i.year),h(19),T(i.days),h(13),g(i.dayName),h(2),g(i.eventDateName),h(2),U(45,i.eventsArray.length>=1?45:46),h(3),O("active",i.isEventModalOpen),h(5),N("formGroup",i.eventForm))},dependencies:[H,J,L,$,q,R],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{width:100%}.plan__wrapper[_ngcontent-%COMP%]{height:680px;padding:20px;background:#f5f5f5;border-radius:0 10px 10px 0}.plan__calendar_block[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:100%}.calendar__main_block[_ngcontent-%COMP%]{width:60%;height:100%}.calendar__main_day[_ngcontent-%COMP%]{width:14.28%;height:76px;border:1px solid #f5f5f5;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#007efe}.calendar__main_day[_ngcontent-%COMP%]:not(.calendar__prev_day, .calendar__next_day)[_ngcontent-%COMP%]:hover{color:#fff;background:#007EFE}.calendar__inner[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;padding:20px;border-radius:10px;position:relative;display:flex;align-items:center;justify-content:space-between;flex-direction:column}.calendar__inner[_ngcontent-%COMP%]:before, .calendar__inner[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:100%;width:12px;height:97%;border-radius:0 5px 5px 0;background:#ececec;transform:translateY(-50%)}.calendar__inner[_ngcontent-%COMP%]:before{height:94%;left:calc(100% + 12px);background:rgb(225,225,225)}.calendar__inner_header[_ngcontent-%COMP%]{width:100%}.calendar__inner_main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.calendar__inner_days[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;flex-wrap:wrap;border:1px solid #f5f5f5}.calendar__inner_footer[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.calendar__header_nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 20px}.calendar__header_weekdays[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;margin-top:20px}.calendar__nav_previous[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.calendar__nav_title[_ngcontent-%COMP%]{font-size:20px;color:#7e7e7e}.calendar__nav_next[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.calendar__weekdays_item[_ngcontent-%COMP%]{width:14.28%;height:100%;display:flex;align-items:center;justify-content:center;color:#7e7e7e}.calendar__prev_day[_ngcontent-%COMP%], .calendar__next_day[_ngcontent-%COMP%]{color:#7e7e7e}.calendar__event_day[_ngcontent-%COMP%]{position:relative}.calendar__event_day[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:10%;left:50%;width:75%;height:5px;border-radius:30px;transform:translate(-50%);background:#007EFE}.calendar__today[_ngcontent-%COMP%]{font-size:20px;font-weight:600}.calendar__active[_ngcontent-%COMP%]{background:#007EFE;color:#fff}.calendar__footer_input[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:6px;overflow:hidden;border:1px solid #007EFE}.calendar__footer_button[_ngcontent-%COMP%]{padding:6px 14px;border:1px solid #007EFE;border-radius:6px;background:transparent;cursor:pointer;color:#007efe}.calendar__footer_button[_ngcontent-%COMP%]:hover{background:#007EFE;color:#fff}.calendar__input_item[_ngcontent-%COMP%]{width:100%;height:30px;outline:none;border:none;border-radius:6px;padding:0 20px;color:#007efe}.calendar__input_item[_ngcontent-%COMP%]::placeholder{color:#007efe}.calendar__input_button[_ngcontent-%COMP%]{padding:6px 10px;border:none;border-left:1px solid #007EFE;background:transparent;cursor:pointer;color:#007efe}.calendar__input_button[_ngcontent-%COMP%]:hover{background:#007EFE;color:#fff}.calendar__main_day.calendar__event_day[_ngcontent-%COMP%]:hover:after{background:#fff}.events__main_block[_ngcontent-%COMP%]{width:36%;position:relative}.event__header_block[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;padding:40px}.event__header_weekname[_ngcontent-%COMP%]{font-size:30px;font-weight:600;color:#007efe}.event__header_date[_ngcontent-%COMP%]{color:#7e7e7e}.event__main_block[_ngcontent-%COMP%]{width:100%;height:440px;overflow:scroll}.event__main_block[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.event__block_item[_ngcontent-%COMP%]{width:100%;padding:12px 30px;color:#fff;position:relative;background:linear-gradient(90deg,rgba(0,51,255,.0470588235),transparent);cursor:pointer}.event__block_item[_ngcontent-%COMP%]:nth-child(2n){background:transparent}.event__block_item[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgba(0,51,255,.2666666667),transparent)}.event__block_item[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:50%;right:0;font-size:3rem;line-height:1;display:none;align-items:center;justify-content:center;opacity:.3;color:#007efe;transform:translateY(-50%)}.event__block_item[_ngcontent-%COMP%]:hover:after{display:flex}.event__block_empty[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;margin-top:200px}.event__empty_text[_ngcontent-%COMP%]{color:#007efe}.event__item_title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.event__item_time[_ngcontent-%COMP%]{margin-top:5px;margin-left:30px;font-size:14px;color:#7e7e7e}.event__add_wrapper[_ngcontent-%COMP%]{position:absolute;bottom:80px;left:50%;width:100%;max-height:0;overflow:hidden;border-radius:5px;background-color:#fff;transform:translate(-50%);transition:max-height .5s ease}.event__add_header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;padding:20px}.event__add_main[_ngcontent-%COMP%]{width:100%;display:flex;align-items:flex-start;justify-content:space-between;flex-direction:column;gap:20px;padding:15px 20px}.event__add_block[_ngcontent-%COMP%]{width:100%}.event__add_footer[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;padding:20px}.event__footer_block[_ngcontent-%COMP%]{width:100%}.item__title_circle[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#007EFE}.item__title_name[_ngcontent-%COMP%]{color:#007efe}.add__header_title[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.add__header_close[_ngcontent-%COMP%]{cursor:pointer;width:20px;height:20px}.add__block_input[_ngcontent-%COMP%]{width:100%;height:30px;outline:none;border:none;border-bottom:1px solid #f5f5f5;padding:0 10px;font-size:1rem;font-weight:400;color:#007efe}.add__block_input[_ngcontent-%COMP%]::placeholder{color:#a5a5a5}.add__block_input[_ngcontent-%COMP%]:focus{border-bottom:1px solid #007EFE}.add__block_input[_ngcontent-%COMP%]:focus::placeholder{color:#007efe}.add__footer_button[_ngcontent-%COMP%]{height:40px;font-size:16px;font-weight:500;outline:none;border:none;color:#fff;background-color:#007efe;border-radius:5px;cursor:pointer;padding:5px 10px;border:1px solid #007EFE}.add__footer_button[_ngcontent-%COMP%]:hover{background-color:transparent;color:#007efe}.add__circle_button[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;width:50px;height:50px;display:flex;align-items:center;justify-content:center;font-size:30px;color:#007efe;border:2px solid #007EFE;opacity:.5;border-radius:50%;background-color:transparent;cursor:pointer}.add__circle_button[_ngcontent-%COMP%]:hover{opacity:1}.event__add_wrapper.active[_ngcontent-%COMP%]{max-height:300px}@media (max-width: 440px){.container[_ngcontent-%COMP%]{width:100%}.plan__wrapper[_ngcontent-%COMP%]{height:100%;padding:0 20px;background:#f5f5f5}.plan__calendar_block[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.calendar__main_block[_ngcontent-%COMP%]{width:100%;margin-top:80px}.calendar__nav_title[_ngcontent-%COMP%]{font-size:20px}.calendar__inner[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;padding:10px;border-radius:10px;position:none;display:flex;align-items:center;justify-content:space-between;flex-direction:column}.calendar__inner[_ngcontent-%COMP%]:before, .calendar__inner[_ngcontent-%COMP%]:after{content:none}.calendar__inner_footer[_ngcontent-%COMP%]{width:100%;margin-top:20px}.calendar__weekdays_item[_ngcontent-%COMP%]{font-size:14px}.calendar__footer_input[_ngcontent-%COMP%]{width:70%}.calendar__footer_button[_ngcontent-%COMP%]{width:26%}.events__main_block[_ngcontent-%COMP%]{width:100%}.event__header_block[_ngcontent-%COMP%]{padding:40px 0}.event__footer_block[_ngcontent-%COMP%]{height:100px}.add__circle_button[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:0;width:50px;height:50px;display:flex;align-items:center;justify-content:center;font-size:30px;color:#007efe;border:2px solid #007EFE;opacity:1;border-radius:50%;background-color:transparent;cursor:pointer}}']});let r=o;return r})();var ie=[{path:"",component:k}],Q=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=v({type:o}),o.\u0275inj=f({imports:[I.forChild(ie),I]});let r=o;return r})();var ge=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=v({type:o}),o.\u0275inj=f({imports:[B,Q,k]});let r=o;return r})();export{ge as PlanModule};
